!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("@ventose/ui")):"function"==typeof define&&define.amd?define(["vue","@ventose/ui"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).VentoseUI=e.VentoseUI||{},e.VentoseUI.components=e.VentoseUI.components||{},e.VentoseUI.components.xMenuTree=t(e.Vue,e.VentoseUI))}(this,(function(e,t){"use strict";const n=t=>e.createVNode(e.resolveComponent("xIcon"),{icon:t,style:"width:16px;height:100%;",class:"auto-size"},null);return e.defineComponent({name:"xMenuTree",props:["tree","authFn"],setup:()=>({}),data:e=>(e.setActiveMenuHighlight=t.xU.debounce((function(){const t=e.pathAndIdCollection[e.currentPath];t&&(e.onOpenChange([t]),e.arr_selectedMenuId=[t])}),300),{openKeys:[],pathAndIdCollection:{},arr_selectedMenuId:[]}),watch:{currentPath:{immediate:!0,handler(){this.setActiveMenuHighlight&&this.setActiveMenuHighlight()}}},methods:{onOpenChange(e){if(!t.xU.isArrayFill(e))return;const n=t.xU.last(e)||"",o=t.xU.safeSplit(n,"###").filter((e=>e)),l=[];for(let t=0;t<o.length;t++){const e=o[t];0===t?l[0]=`###${e}`:l[t]=`${l[t-1]}###${e}`}this.openKeys=l}},computed:{currentPath(){return this.$route.path},subTree(){const o=this,l=this.tree||[],r=(l,s)=>{const a=`${s}###${l.id}`;return this.authFn&&!this.authFn(l)?null:t.xU.isArrayFill(l.children)?e.createVNode(e.resolveComponent("aSubMenu"),{key:a},{icon:()=>n(l.icon),title:()=>l.label,default:()=>t.xU.map(l.children,(e=>r(e,a)))}):(o.pathAndIdCollection[l.path]=a,e.createVNode(e.resolveComponent("elMenuItem"),{key:a,class:"flex middle"},{icon:()=>n(l.icon),title:()=>l.label,default:()=>{if(l.payload&&l.payload.openType&&"NEW_TAB"===l.payload.openType){const t={};return l.path||(t.disabled=!0),e.createVNode("a",e.mergeProps({title:l.label},t,{href:l.path,target:"_blank",onClick:e=>{e.stopPropagation(),e.preventDefault(),l.path&&l.path&&window.open(l.path,"_blank")}}),[l.label])}return e.createVNode(e.Fragment,null,[e.createVNode(e.resolveComponent("RouterLink"),{to:l.path||"/404"},{default:()=>[l.label]})])}}))};return t.xU.isArrayFill(l)?t.xU.map(l,(e=>r(e,""))):null}},render(){return e.createVNode(e.resolveComponent("elMenu"),{openKeys:this.openKeys,onOpenChange:this.onOpenChange,selectedKeys:this.arr_selectedMenuId,"onUpdate:selectedKeys":e=>this.arr_selectedMenuId=e,mode:"inline"},{default:()=>[this.subTree]})}})}));
